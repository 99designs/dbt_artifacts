version: 2

models:

  - name: fct_dbt__model_executions
    description: All historic dbt model executions.
    columns:
    - name: model_execution_id
      description: Primary key.
      tests:
        - unique
        - not_null
    - name: name
      description: The name of the model.
    - name: model_schema
      description: The schema containing the model.
    - name: was_full_refresh
      description: Was this model executed with a --full-refresh flag?
    - name: model_materialization
      description: The configured materialization of the model.
    - name: execution_time
      description: How long did the model take to run?
    - name: status
      description: success/fail status of the model's execution.
    - name: command_invocation_id
      description: Foreign key to fct_dbt_run_results. The id of the command which resulted in the source artifact's generation.
    - name: artifact_generated_at
      description: Timestamp of when the source artifact was generated.
    - name: node_id
      description: Unique id for the node, in the form of model.[package_name].[model_name]
    - name: rows_affected
      description: The number of rows affected by the model's execution. Always 1 for non-incremental executions.

  - name: fct_dbt__run_results
    description: Metadata for dbt run commands.
    columns:
    - name: command_invocation_id
      description: The id of the command which resulted in the source artifact's generation.
      tests:
        - unique
        - not_null
    - name: artifact_generated_at
      description: Timestamp of when the source artifact was generated.
    - name: dbt_version
      description: The version of dbt used to generate the source artifact.
    - name: elapsed_time
      description: The total run time of the command.
    - name: execution_command
      description: The actual command used.
    - name: selected_models
      description: A list of model selectors used in the command.
    - name: target
      description: The configured target for the command.
    - name: was_full_refresh
      description: Was the run executed with a --full-refresh flag?
    - name: env_*
      description: Columns for the environment variables set when the command was executed.
